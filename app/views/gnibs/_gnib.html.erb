<% if(gnib) %>
  <div id="<%=gnib.id%>"
       class="gnib-thumbnail" style="margin-bottom: -1px; padding-bottom: 0px; float: left;">
    <div id="thumbnail-control_<%=gnib.id%>" class="thumbnail-control"
         style="border-top-left-radius: 5px; border-top-right-radius: 5px; display: block; height: 40px">
      <div class="gnib-count"
           style="font-size: 12px; color: white; background: rgba(23, 174, 255, 0.4);
           min-width: 60px; width: 40%; height: 30px; float: left; text-align: left">
        <div id="gnib_count_<%=gnib.id%>" style="border-bottom: 2px solid white; padding: 5px; text-align: left"
             align="center" title="<%= gnib.regnibbedby(current_user)%>">
          <%=gnib.gniblings.count%>Regnibs
        </div>
      </div>
      <button title="gnib it!" class="gnib-gnib-button"
              onclick="return doAjaxSubmit({gnib_id: '<%= gnib.id %>'}, '/gniblings/create');"
              style="margin: 1px 5px 0 0; background-size: 100% 100%; float: left; width: 38px; height: 38px"></button>
      <button title="<%= gnib.upvotedby(current_user)%>" class="gnib-gnib-button"
              onclick="return doAjaxSubmit({gnib_id: '<%= gnib.id %>'}, '/gnibs/upvotegnib');"
              style="background: none; width: 50px; height: 38px; float: right; padding: 3px 0px; margin: 0px; margin-right: 5px; position: relative; border-left: 2px solid white; border-radius: 0px">
        <span id="upvoted_gnibs_<%=gnib.id%>" style="position: absolute; right: 34px; color: cyan; font-size: 12px">
          <% if gnib.upvotegnibs.count > 0 %>
            <%=  gnib.upvotegnibs.count%>
          <% end %>
        </span>
        <span style="position: absolute; right: 10px; top: 0px;  background: url(<%= image_path('arrow_up.png') %>);
              height: 40px; width: 35px; margin: 0px; padding: 0px; background-size: 100% 100%"></span>
        <span id="upvoted_gnibs_ups_text_<%=gnib.id%>" style="position: absolute; right: 0px; color: cyan; font-size: 13px">
          Up<% if gnib.upvotegnibs.count > 1%>s<% end %>
        </span>
      </button>
    </div>
    <button class="gnib" style="background:transparent; border: 0px none; margin-top: 0px; border-radius: 0px" data-gnib-id="<%=gnib.id%>"
            onclick="doAjaxSubmit({gnib_id: '<%= gnib.id %>'}, '/gnibs/retcomment');

                          return false;">          
                <%= image_tag(image_path(gnib.imageurl), :class => 'gnib', :id=>"gnib_#{gnib.id}", :style=>"height: 100%")%>              
   </button>  
    <div  class="thumbnail-view" style="overflow: hidden; bottom: -6px; ; border-radius: 10px; display: block; height: auto">
      <div style="color: #17aeff; font-size: 15px; font-weight: bold; height: 40px; display: table-cell; vertical-align: middle; padding-left: 5px">
        <a href="/users/<%=gnib.user.html_safe_username%>" 
<%if gnib.title %>
title = "<%= gnib.title.html_safe%>" 
<% end %>
style="color: #17aeff;"><%=gnib.short_title.html_safe%></a>

      </div>
      <div id="thumbnail-view_<%=gnib.id%>"
           style="width: 100%; display: none; margin: auto; border-top: 2px solid white;  padding-top: 4px !important">
<div id = "thumbnail-name_<%=gnib.id%>" class = "thumbnail-name" style="color: #17aeff;">
<%= gnib.user.name %> <%= gnib.user.surname %>
</div>
        <div id="thumbnail-desc_<%=gnib.id%>" class="thumbnail-desc" style="width: 40%; float: left; margin-bottom: 10px;">
          <%=image_tag(image_path(gnib.user.avatar_url), :class=>"thumbnail-user-profile")%>
        </div>
        <div id="thumbnail-desc-msg_<%=gnib.id%>" class="thumbnail-msg"
             style="max-width: 50%; left: 48%; top: 32%; position: absolute; text-align: left; margin-bottom: 10px; overflow: hidden; ">
          <p><%= gnib.parsed_description%></p>
          <% if gnib.link %>
            <p><a target="_blank" href="<%= gnib.link %>">See what is here?</a></p>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
                var speed = 300;
                var rollbackSpeed = 600;
                $('#<%= gnib.id %>').hover(function() {
                  $('#thumbnail-view_<%=gnib.id%>').slideDown(speed, function() {
                    $(this).show();
                  });
                  $('#thumbnail-control_<%=gnib.id%>').slideDown(speed, function() {
                    $(this).show();
                  });
                },
                        function() {
                          $('#thumbnail-control_<%=gnib.id%>').slideUp(rollbackSpeed, function() {
                            $(this).hide();
                          });
                          $('#thumbnail-view_<%=gnib.id%>').slideUp(rollbackSpeed, function() {
                            $(this).hide();
                          });
                        });
  </script>
<% end %>
